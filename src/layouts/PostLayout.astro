---
import Navigation from "@/components/Navigation.astro";
import Layout from "./Layout.astro";
const { frontmatter } = Astro.props;
---

<Layout title={frontmatter.title}>
  <Navigation activeNavItem="blog" />
  <div class="text-white p-4 flex flex-col gap-10 pt-20">
    <div
      class="flex flex-row top-0 mx-auto text-center justify-center sticky text-xl w-full lg:text-2xl font-kodeMono backdrop-blur-xl bg-primaryDark/90 z-10 p-2 lg:p-4 border-b-2 border-lightGreen/30"
    >
      <h1
        class="mx-auto w-full text-transparent bg-gradient-to-r bg-clip-text from-blue-500 via-purple-500 to-red-500 hover:from-red-500 hover:via-purple-500 hover:to-blue-500 transition-all duration-700"
      >
        {frontmatter.title}
        <p class="italic text-sm text-gray-400 pt-1">
          {frontmatter.date}
          <span class="hidden lg:inline-block"
            >• {Math.ceil(frontmatter.readingTime || 5)} min read •
          </span>
          <span class="text-teaGreen">
            {
              frontmatter.tags &&
                frontmatter.tags.length > 0 &&
                `#${frontmatter.tags[0]}`
            }
          </span>
        </p>
      </h1>
    </div>

    <div class="flex flex-row w-full gap-6 lg:gap-16 relative">
      <div class="hidden lg:block lg:w-1/4 sticky top-32 h-fit ml-10">
        {
          frontmatter?.tableOfContents?.length > 0 && (
            <div class="bg-primaryDark/50 backdrop-blur-sm p-6 rounded-xl border border-lightGreen/20">
              <p class="font-bold font-kodeMono text-teaGreen mb-4">
                Table Of Contents
              </p>
              <ol class="flex flex-col gap-4">
                {frontmatter.tableOfContents.map(
                  (tableOfContent: string, index: number) => (
                    <li class="text-lightGreen hover:text-teaGreen transition-all duration-300 flex gap-2">
                      <span class="text-teaGreen/70 font-kodeMono">
                        {index + 1}.
                      </span>
                      <a
                        href={`#${tableOfContent.toLowerCase().replace(/\s+/g, "-")}`}
                        class="hover:underline"
                      >
                        {tableOfContent}
                      </a>
                    </li>
                  ),
                )}
              </ol>
            </div>
          )
        }

        <div
          class="mt-8 bg-primaryDark/50 backdrop-blur-sm p-6 rounded-xl border border-lightGreen/20"
        >
          <p class="font-bold font-kodeMono text-teaGreen mb-4">Share This</p>
          <div class="flex gap-4">
            <a
              href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(frontmatter.title)}&url=${encodeURIComponent(`https://yoursite.com/posts/${frontmatter.slug}`)}`}
              target="_blank"
              class="text-lightGreen hover:text-teaGreen transition-all"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path
                  d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"
                ></path>
              </svg>
            </a>
            <a
              href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(`https://yoursite.com/posts/${frontmatter.slug}`)}`}
              target="_blank"
              class="text-lightGreen hover:text-teaGreen transition-all"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path
                  d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"
                ></path>
              </svg>
            </a>
          </div>
        </div>
      </div>

      <div
        class="mx-auto p-4 pt-0 lg:w-1/2 font-montserrat pb-[5rem] lg:pb-[10rem]"
      >
        <div
          class="prose prose-invert prose-lg max-w-none prose-headings:font-kodeMono prose-headings:text-teaGreen prose-a:text-lightGreen hover:prose-a:text-teaGreen prose-a:transition-all prose-a:duration-300 prose-a:no-underline prose-a:border-b prose-a:border-lightGreen/30 hover:prose-a:border-teaGreen prose-code:text-red-400 prose-code:bg-primaryDark/50 prose-code:p-1 prose-code:rounded"
        >
          <slot />
        </div>

        <div class="mt-16 pt-8 border-t border-lightGreen/20">
          <div
            class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4"
          >
            <div>
              <p class="text-teaGreen font-kodeMono text-sm">WRITTEN BY</p>
              <p class="text-lightGreen text-lg">
                {frontmatter.author || "Shreyas Thirumalai"}
              </p>
            </div>

            {
              frontmatter.tags && frontmatter.tags.length > 0 && (
                <div>
                  <p class="text-teaGreen font-kodeMono text-sm">TAGS</p>
                  <div class="flex flex-wrap gap-2 mt-2">
                    {frontmatter.tags.map((tag: string) => (
                      <span class="bg-primaryGreenDark/50 text-lightGreen px-3 py-1 rounded-full text-xs font-kodeMono">
                        #{tag}
                      </span>
                    ))}
                  </div>
                </div>
              )
            }
          </div>

          <div
            class="mt-10 p-6 bg-primaryDark/50 backdrop-blur-sm rounded-xl border border-lightGreen/20"
          >
            <p class="text-teaGreen font-kodeMono text-lg mb-4">
              Enjoyed this post?
            </p>
            <p class="text-lightGreen mb-4">
              Check out more of my writing or connect with me on social media!
            </p>
            <div class="flex gap-4">
              <a
                href="/posts"
                class="bg-teaGreen text-primaryDark font-kodeMono font-bold px-4 py-2 rounded-lg hover:bg-opacity-80 transition-all duration-300"
              >
                More Posts
              </a>
              <a
                href="/contact"
                class="bg-primaryGreenDark text-teaGreen font-kodeMono font-bold px-4 py-2 rounded-lg hover:bg-opacity-80 transition-all duration-300"
              >
                Say Hi!
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<style>
  /* Add some sass with animated underlines for headings */
  :global(h2),
  :global(h3) {
    position: relative;
    display: inline-block;
  }

  :global(h2)::after,
  :global(h3)::after {
    content: "";
    position: absolute;
    width: 0;
    height: 3px;
    bottom: 0;
    left: 0;
    background: linear-gradient(90deg, #60a5fa, #db2777);
    transition: width 0.4s ease-in-out;
  }

  :global(h2:hover)::after,
  :global(h3:hover)::after {
    width: 100%;
  }

  /* Add some sass with subtle animations for code blocks */
  :global(pre) {
    position: relative;
    border-radius: 0.5rem;
    border-left: 4px solid #aef78e;
    transition: all 0.3s ease;
  }

  :global(pre:hover) {
    border-left-color: #db2777;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
</style>
